# Phase 3: コンパイル・リンクオプション詳細

## カテゴリ
環境・構成編

## 概要
コンパイラ、アセンブラ、リンカのオプションを詳細に解析し、ビルド設定の意図を理解する。

## 解析要求事項

このプロジェクトのコンパイラ、アセンブラ、リンカのオプションを詳細に解析してください。

### 1. コンパイラオプション（C/C++）

以下の項目を調査してください：

| 項目 | オプション例 | 説明 |
|------|-------------|------|
| 最適化レベル | -O0, -O2, -Os | デバッグ/リリースでの違い |
| 警告設定 | -Wall, -Wextra | 有効な警告オプション |
| 言語標準 | -std=c11, -std=gnu99 | C/C++の言語規格 |
| プリプロセッサ定義 | -D | 定義されているマクロ |
| インクルードパス | -I | ヘッダファイル検索パス |
| CPU指定 | -mcpu=cortex-m85 | ターゲットCPU |
| FPU指定 | -mfpu=fpv5-d16 | 浮動小数点ユニット |
| ABI | -mfloat-abi=hard | 浮動小数点ABI |

#### Debug構成とRelease構成の比較表

```
| オプション | Debug | Release | 備考 |
|-----------|-------|---------|------|
| 最適化    | -O0   | -O2     | ...  |
| デバッグ情報 | -g | なし    | ...  |
```

### 2. アセンブラオプション

- アセンブラ指定（-x assembler-with-cpp など）
- プリプロセッサ定義
- CPU指定
- その他のアセンブラ固有オプション

### 3. リンカオプション

| 項目 | オプション例 | 説明 |
|------|-------------|------|
| リンカスクリプト | -T script.ld | メモリ配置定義 |
| ライブラリパス | -L | ライブラリ検索パス |
| ライブラリ | -l | リンクするライブラリ |
| エントリポイント | --entry | プログラム開始アドレス |
| ガベージコレクション | --gc-sections | 未使用コード削除 |
| Mapファイル | -Map | メモリマップ出力 |

### 4. ポストビルド処理

- objcopy によるバイナリ変換オプション
- hex/mot/srec 生成コマンド
- サイズ表示コマンド（arm-none-eabi-size）
- その他のポストビルドスクリプト

### 5. 特殊な設定

- **TrustZone関連**
  - セキュア/非セキュアの区別
  - NSC (Non-Secure Callable) 設定

- **浮動小数点演算**
  - ハードウェアFPU使用設定
  - ソフトウェアエミュレーション

- **スタック/ヒープサイズ**
  - 指定方法
  - デフォルト値

- **キャッシュ制御**
  - MPU設定
  - キャッシュ有効/無効領域

### 6. 最適化に関する考慮事項

- デバッグビルドでの注意点
- リリースビルドでの最適化設定
- コードサイズ vs 実行速度のトレードオフ
- LTO (Link Time Optimization) の使用有無

## 期待する成果物

1. **オプション一覧表**
   - 全オプションの一覧と説明
   - Debug/Release構成の比較

2. **オプション定義場所**
   - 各オプションが定義されているファイルパス
   - 変更方法

3. **推奨設定ガイド**
   - 用途別の推奨設定
   - パフォーマンスチューニングのヒント
