# Phase 4: OS特定

## カテゴリ
基盤編

## 概要
プロジェクトで使用しているRTOSを特定し、タスク構成と同期機構を解析する。

## 解析要求事項

このプロジェクトで使用しているRTOSを特定し、詳細を解析してください。

### 1. RTOS名とバージョン

以下のRTOSのいずれを使用しているか特定してください：

| RTOS | 識別方法 |
|------|----------|
| FreeRTOS | FreeRTOS.h, FreeRTOSConfig.h |
| Azure RTOS (ThreadX) | tx_api.h, tx_user.h |
| ベアメタル（RTOS未使用） | 上記ファイルが存在しない |

- 該当するヘッダファイルや設定ファイルのパス
- バージョン情報（可能であれば）

### 2. タスク構成（RTOSの場合）

各タスクについて以下を調査してください：

| 項目 | 説明 |
|------|------|
| タスク名 | タスクの識別名 |
| 優先度 | 優先度レベル（数値と意味） |
| スタックサイズ | バイト単位またはワード単位 |
| 役割・責務 | タスクが担当する処理 |
| エントリ関数 | タスクのメイン関数名 |

#### タスク一覧表の例

```
| タスク名 | 優先度 | スタック | 役割 |
|----------|--------|----------|------|
| MainTask | 5 | 4096 | メイン処理 |
| TouchTask | 7 | 2048 | タッチ入力処理 |
| DisplayTask | 6 | 8192 | 画面描画処理 |
```

### 3. 同期・通信機構

使用している同期・通信機構を列挙してください：

#### セマフォ
- バイナリセマフォ
- カウンティングセマフォ
- 用途と使用箇所

#### ミューテックス
- 保護対象リソース
- 使用箇所

#### イベントフラグ/イベントグループ
- 定義されているフラグ
- 用途

#### メッセージキュー
- キュー名
- メッセージ型
- 送受信タスク

#### ソフトウェアタイマー
- タイマー名
- 周期
- コールバック関数

### 4. OS関連の設定ファイル

#### FreeRTOSの場合 (FreeRTOSConfig.h)
- configTICK_RATE_HZ（システムティック周期）
- configMAX_PRIORITIES（最大優先度数）
- configMINIMAL_STACK_SIZE（最小スタックサイズ）
- configTOTAL_HEAP_SIZE（ヒープサイズ）
- その他の重要設定

#### Azure RTOSの場合 (tx_user.h)
- TX_TIMER_TICKS_PER_SECOND
- TX_MAX_PRIORITIES
- その他の重要設定

### 5. OS初期化フロー

- OSカーネルの初期化タイミング
- タスク生成順序
- スケジューラ開始タイミング

## 期待する成果物

1. **RTOS識別結果**
   - 使用しているRTOS名とバージョン
   - 根拠となるファイル

2. **タスク構成図**
   - タスク間の関係図
   - 優先度の階層構造

3. **同期機構一覧**
   - 使用している同期機構の一覧
   - 用途と使用パターン

4. **OS設定サマリー**
   - 重要な設定項目の一覧
   - デフォルト値からの変更点
