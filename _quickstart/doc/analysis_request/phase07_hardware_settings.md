# Phase 7: ハードウェア設定解析

## カテゴリ
基盤編

## 概要
クロック設定、ピン設定、周辺機能の初期化設定を詳細に解析する。

## 解析要求事項

このプロジェクトのハードウェア設定を詳細に解析してください。

### 1. クロック設定

調査対象ファイル：
- `bsp_clock_cfg.h`
- `bsp_clocks.c`
- `configuration.xml` のクロック設定部分

#### クロックソース

| クロック | 周波数 | 用途 |
|----------|--------|------|
| MOSC (メイン発振器) | ? MHz | PLL入力 |
| HOCO (高速オンチップ) | ? MHz | 代替クロック |
| LOCO (低速オンチップ) | ? kHz | 低消費電力用 |
| SOSC (サブクロック) | 32.768 kHz | RTC |

#### PLL設定

| 項目 | 設定値 | 説明 |
|------|--------|------|
| PLL入力分周比 | ? | 入力周波数の分周 |
| PLL逓倍率 | ? | 周波数逓倍 |
| PLL出力分周比 | ? | 出力周波数の分周 |
| PLL出力周波数 | ? MHz | 最終出力 |

#### システムクロック

| クロック | 周波数 | 分周比 | 用途 |
|----------|--------|--------|------|
| ICLK | ? MHz | /? | CPUクロック |
| PCLKA | ? MHz | /? | 高速周辺クロック |
| PCLKB | ? MHz | /? | 周辺クロック |
| PCLKC | ? MHz | /? | 周辺クロック |
| PCLKD | ? MHz | /? | 周辺クロック |
| FCLK | ? MHz | /? | Flash クロック |
| BCLK | ? MHz | /? | 外部バスクロック |

#### 専用クロック

| クロック | 周波数 | 用途 |
|----------|--------|------|
| GLCDC用クロック | ? MHz | LCDコントローラ |
| USB用クロック | 48 MHz | USB通信 |
| Ethernet用クロック | ? MHz | ネットワーク |

### 2. ピン設定

調査対象ファイル：
- `pin_data.c`
- `configuration.xml` のピン設定部分

#### LCD接続ピン

| 信号名 | ピン番号 | 機能 |
|--------|----------|------|
| LCD_DATA0-23 | ? | RGBデータ |
| LCD_CLK | ? | ピクセルクロック |
| LCD_HSYNC | ? | 水平同期 |
| LCD_VSYNC | ? | 垂直同期 |
| LCD_DE | ? | データイネーブル |

#### カメラ接続ピン（MIPI-CSI）

| 信号名 | ピン番号 | 機能 |
|--------|----------|------|
| MIPI_CLK_P/N | ? | 差動クロック |
| MIPI_DATA0_P/N | ? | 差動データ0 |
| MIPI_DATA1_P/N | ? | 差動データ1 |

#### タッチパネルI2Cピン

| 信号名 | ピン番号 | 機能 |
|--------|----------|------|
| I2C_SDA | ? | データ |
| I2C_SCL | ? | クロック |
| TOUCH_INT | ? | 割込み |
| TOUCH_RST | ? | リセット |

#### その他の重要なピン

- SDRAM接続ピン
- デバッグ（SWD/JTAG）ピン
- ユーザーLED/ボタン

### 3. 周辺機能の初期化設定

調査対象ファイル：
- `configuration.xml`
- `hal_data.c` / `hal_data.h`

#### GLCDC（Graphics LCD Controller）

| 項目 | 設定値 |
|------|--------|
| 解像度 | ? x ? |
| 色深度 | ? bpp |
| ピクセルフォーマット | RGB565/RGB888/ARGB8888 |
| フレームバッファアドレス | ? |
| VSync周波数 | ? Hz |
| レイヤー数 | ? |

#### MIPI-DSI/CSI

| 項目 | 設定値 |
|------|--------|
| レーン数 | ? |
| データレート | ? Mbps |
| 動作モード | ? |

#### I2C（タッチコントローラ用）

| 項目 | 設定値 |
|------|--------|
| チャネル | IIC? |
| 通信速度 | ? kHz |
| スレーブアドレス | 0x?? |

#### GPT（タイマー）

| チャネル | 用途 | 周期 |
|----------|------|------|
| GPT0 | ? | ? |
| GPT1 | ? | ? |

#### DMA/DTC

| チャネル | 用途 | 転送元→先 |
|----------|------|----------|
| DMA0 | ? | ? |
| DTC | ? | ? |

## 期待する成果物

### 1. クロックツリー図

```
MOSC (24MHz)
    │
    ▼
  [PLL]──────────────────────────────
    │ x?? / ÷?                      │
    ▼                               │
  PLLCLK (???MHz)                   │
    │                               │
    ├─÷?─→ ICLK (???MHz) → CPU      │
    ├─÷?─→ PCLKA (???MHz)           │
    ├─÷?─→ PCLKB (???MHz)           │
    └─÷?─→ ...                      │
                                    │
HOCO (??MHz) ───────────────────────┘
```

### 2. ピンアサイン表

完全なピンアサイン表を作成してください。

### 3. 周辺機能設定サマリー

各周辺機能の設定値と、その設定の意図を説明してください。
