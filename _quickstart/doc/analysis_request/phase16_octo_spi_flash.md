# Phase 16: Octo-SPI フラッシュ解析

## カテゴリ
外部メモリ・ペリフェラル編

## 概要
EK-RA8P1ボード上のOcto-SPIフラッシュメモリ（Macronix MX25LW51245G）について、メモリ領域、ハードウェア設定、プログラムインターフェース、制御方法を包括的に解析する。

## 解析要求事項

### 1. メモリ領域の範囲

#### 1.1 ハードウェアとして使えるメモリ領域のサイズ
- Octo-SPIフラッシュデバイスの物理的なメモリサイズ
- メモリマップドアドレス空間上の配置範囲（CS0/CS1）

#### 1.2 プログラムで設定しているメモリ領域
- FSP設定によるOSPIメモリ領域の定義
- アプリケーションコードで使用しているアドレス範囲
- セクション属性（`.ospi0_cs1`等）によるデータ配置

#### 1.3 リンカスクリプトの設定
- `fsp.ld`、`memory_regions.ld`、`fsp_gen.ld` の関係と設定内容
- OSPIメモリセクションの定義

### 2. ハードウェア設定

#### 2.1 データ配置のための設定
- 画像データ、その他のデータ、コードをOcto-SPIフラッシュに配置するために必要な設定

#### 2.2 IOポート設定
- OSPIに使用されるピン割り当て一覧
- ピンの機能と設定内容

#### 2.3 クロック設定
- OCTACLKのソースと分周比
- 動作周波数

#### 2.4 その他のハードウェア初期設定
- OSPI_Bペリフェラルの初期化シーケンス
- リセット制御

### 3. プログラムとのインターフェース

#### 3.1 アプリとOcto-SPIフラッシュアクセスのインターフェース
- FSP APIを通じたread/write/eraseのインターフェース
- メモリマップドアクセス方式

#### 3.2 Octo-SPIフラッシュ関連ファイルの機能説明
- 各ソースファイルの役割と責務

#### 3.3 Octo-SPIフラッシュに配置しているデータの説明
- 配置データの種類と用途
- 配置データを利用しているソースコードの解説

#### 3.4 ospi_performance_test関数の処理内容
- `ext_display_menu`関数内から呼ばれる`ospi_performance_test`関数の詳細解析
- ライト、リード処理の流れ

### 4. JLinkScriptファイルの解説
- `RA8x1_Reset_OSPI.JLinkScript`がOcto-SPIフラッシュに対して行っている処理

### 5. Octo-SPIフラッシュの制御方法
- 読み書きを可能にするための手順
- プロトコルモード（SPI/OPI/DTR）の切り替え方法

## 期待する成果物

1. **メモリマップ図**: OSPI メモリ領域の全体像
2. **ハードウェア設定一覧**: ピン、クロック、初期化設定
3. **ソフトウェアインターフェース図**: API呼び出し関係
4. **関連ファイル一覧表**: 各ファイルの役割と機能
5. **制御フロー図**: OSPI読み書きの手順
